<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Python Imports ‚Äî The Complete Mental Model</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Syne:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0f;
    --surface: #111118;
    --surface2: #1a1a24;
    --border: #2a2a3a;
    --accent: #7fff6e;
    --accent2: #6eb4ff;
    --accent3: #ff9f6e;
    --accent4: #d46eff;
    --text: #e8e8f0;
    --muted: #7070a0;
    --code-bg: #0d0d14;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Syne', sans-serif;
    line-height: 1.6;
    overflow-x: hidden;
  }

  /* NAV */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    background: rgba(10,10,15,0.92);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
    z-index: 100;
    display: flex;
    align-items: center;
    gap: 0;
    padding: 0 2rem;
    height: 56px;
    overflow-x: auto;
  }

  nav a {
    color: var(--muted);
    text-decoration: none;
    font-size: 0.78rem;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    padding: 0 1rem;
    height: 56px;
    display: flex;
    align-items: center;
    border-bottom: 2px solid transparent;
    white-space: nowrap;
    transition: all 0.2s;
  }
  nav a:hover, nav a.active { color: var(--accent); border-bottom-color: var(--accent); }
  nav .logo { color: var(--accent); font-size: 0.9rem; font-weight: 800; margin-right: 1.5rem; white-space: nowrap; }

  /* SECTIONS */
  main { padding-top: 56px; }

  section {
    padding: 5rem 2rem;
    max-width: 900px;
    margin: 0 auto;
    border-bottom: 1px solid var(--border);
  }

  /* HERO */
  .hero {
    min-height: 80vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    max-width: 100%;
    padding: 5rem 4rem;
    background:
      radial-gradient(ellipse 60% 50% at 80% 50%, rgba(127,255,110,0.05) 0%, transparent 70%),
      radial-gradient(ellipse 40% 60% at 10% 80%, rgba(110,180,255,0.05) 0%, transparent 70%);
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-image: 
      linear-gradient(rgba(127,255,110,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(127,255,110,0.03) 1px, transparent 1px);
    background-size: 50px 50px;
    pointer-events: none;
  }
  .hero-tag {
    font-family: 'Space Mono', monospace;
    font-size: 0.75rem;
    color: var(--accent);
    letter-spacing: 0.2em;
    text-transform: uppercase;
    margin-bottom: 1.5rem;
  }
  .hero h1 {
    font-size: clamp(2.5rem, 6vw, 5rem);
    font-weight: 800;
    line-height: 1.05;
    max-width: 700px;
    margin-bottom: 1.5rem;
  }
  .hero h1 span { color: var(--accent); }
  .hero p {
    font-size: 1.1rem;
    color: var(--muted);
    max-width: 560px;
    margin-bottom: 2.5rem;
    line-height: 1.7;
  }
  .pill-row { display: flex; gap: 0.75rem; flex-wrap: wrap; }
  .pill {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 100px;
    padding: 0.4rem 1rem;
    font-family: 'Space Mono', monospace;
    font-size: 0.75rem;
    color: var(--muted);
  }

  /* SECTION HEADERS */
  .sec-label {
    font-family: 'Space Mono', monospace;
    font-size: 0.7rem;
    color: var(--accent);
    letter-spacing: 0.2em;
    text-transform: uppercase;
    margin-bottom: 0.75rem;
  }
  h2 {
    font-size: 2rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    line-height: 1.2;
  }
  h3 { font-size: 1.15rem; font-weight: 600; margin: 1.5rem 0 0.5rem; color: var(--accent2); }
  p { color: #b0b0cc; margin-bottom: 1rem; line-height: 1.7; }
  ul { color: #b0b0cc; padding-left: 1.5rem; margin-bottom: 1rem; }
  ul li { margin-bottom: 0.4rem; line-height: 1.6; }
  strong { color: var(--text); }

  /* CODE BLOCKS */
  .code-block {
    background: var(--code-bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    margin: 1.25rem 0;
    font-family: 'Space Mono', monospace;
    font-size: 0.82rem;
    line-height: 1.7;
  }
  .code-header {
    background: var(--surface2);
    border-bottom: 1px solid var(--border);
    padding: 0.5rem 1rem;
    font-size: 0.7rem;
    color: var(--muted);
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .code-header .dot { width: 8px; height: 8px; border-radius: 50%; }
  .code-header .d1 { background: #ff5f57; }
  .code-header .d2 { background: #febc2e; }
  .code-header .d3 { background: #28c840; }
  .code-body { padding: 1.25rem 1.5rem; overflow-x: auto; }
  .code-body pre { white-space: pre; }

  /* Syntax highlighting via spans */
  .kw { color: var(--accent4); }
  .mod { color: var(--accent2); }
  .fn { color: var(--accent); }
  .str { color: var(--accent3); }
  .cmt { color: #505070; font-style: italic; }
  .num { color: #ff9f6e; }

  /* DIAGRAM / VISUAL */
  .diagram {
    background: var(--code-bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1.5rem;
    margin: 1.25rem 0;
    font-family: 'Space Mono', monospace;
    font-size: 0.8rem;
    line-height: 1.8;
    color: var(--muted);
    overflow-x: auto;
    white-space: pre;
  }
  .diagram .hi { color: var(--accent); }
  .diagram .hi2 { color: var(--accent2); }
  .diagram .hi3 { color: var(--accent3); }
  .diagram .hi4 { color: var(--accent4); }

  /* CARD GRID */
  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1rem;
    margin: 1.25rem 0;
  }
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1.25rem;
    transition: border-color 0.2s;
  }
  .card:hover { border-color: var(--accent); }
  .card-icon { font-size: 1.5rem; margin-bottom: 0.5rem; }
  .card h4 { font-size: 0.9rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text); }
  .card p { font-size: 0.82rem; color: var(--muted); margin: 0; }

  /* CALLOUT */
  .callout {
    border-left: 3px solid var(--accent);
    background: rgba(127,255,110,0.04);
    border-radius: 0 8px 8px 0;
    padding: 1rem 1.25rem;
    margin: 1.25rem 0;
    font-size: 0.9rem;
  }
  .callout.warn { border-color: var(--accent3); background: rgba(255,159,110,0.04); }
  .callout.info { border-color: var(--accent2); background: rgba(110,180,255,0.04); }
  .callout.tip { border-color: var(--accent4); background: rgba(212,110,255,0.04); }
  .callout-title { font-weight: 700; font-size: 0.75rem; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 0.4rem; }
  .callout.warn .callout-title { color: var(--accent3); }
  .callout.info .callout-title { color: var(--accent2); }
  .callout.tip .callout-title { color: var(--accent4); }
  .callout .callout-title { color: var(--accent); }

  /* COMPARISON TABLE */
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.25rem 0;
    font-size: 0.85rem;
  }
  th {
    background: var(--surface2);
    border: 1px solid var(--border);
    padding: 0.6rem 1rem;
    text-align: left;
    font-weight: 700;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--muted);
  }
  td {
    border: 1px solid var(--border);
    padding: 0.6rem 1rem;
    color: #b0b0cc;
    vertical-align: top;
  }
  td code {
    font-family: 'Space Mono', monospace;
    font-size: 0.78rem;
    color: var(--accent2);
    background: var(--code-bg);
    padding: 0.1em 0.3em;
    border-radius: 3px;
  }
  tr:hover td { background: rgba(255,255,255,0.02); }

  /* INTERACTIVE QUIZ */
  .quiz-box {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.5rem;
    margin: 1.5rem 0;
  }
  .quiz-question { font-weight: 600; margin-bottom: 1rem; font-size: 0.95rem; }
  .quiz-options { display: flex; flex-direction: column; gap: 0.5rem; }
  .quiz-option {
    background: var(--code-bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.75rem 1rem;
    cursor: pointer;
    font-family: 'Space Mono', monospace;
    font-size: 0.8rem;
    color: var(--muted);
    transition: all 0.15s;
    text-align: left;
  }
  .quiz-option:hover { border-color: var(--accent2); color: var(--text); }
  .quiz-option.correct { border-color: var(--accent); background: rgba(127,255,110,0.08); color: var(--accent); }
  .quiz-option.wrong { border-color: #ff5757; background: rgba(255,87,87,0.08); color: #ff5757; }
  .quiz-feedback { margin-top: 0.75rem; font-size: 0.85rem; min-height: 1.2rem; }
  .quiz-feedback.ok { color: var(--accent); }
  .quiz-feedback.no { color: #ff5757; }

  /* FOOTER */
  footer {
    text-align: center;
    padding: 3rem 2rem;
    color: var(--muted);
    font-size: 0.8rem;
    font-family: 'Space Mono', monospace;
    border-top: 1px solid var(--border);
  }

  /* SCROLL ANIMATION */
  .fade-in {
    opacity: 0;
    transform: translateY(24px);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }
  .fade-in.visible { opacity: 1; transform: translateY(0); }

  /* INLINE CODE */
  code {
    font-family: 'Space Mono', monospace;
    font-size: 0.82em;
    color: var(--accent2);
    background: var(--code-bg);
    padding: 0.1em 0.35em;
    border-radius: 4px;
    border: 1px solid var(--border);
  }

  /* STEP LIST */
  .steps { counter-reset: steps; list-style: none; padding: 0; }
  .steps li {
    counter-increment: steps;
    padding: 0.75rem 0 0.75rem 3rem;
    position: relative;
    border-bottom: 1px solid var(--border);
    color: #b0b0cc;
    font-size: 0.9rem;
  }
  .steps li:last-child { border-bottom: none; }
  .steps li::before {
    content: counter(steps);
    position: absolute;
    left: 0;
    top: 0.75rem;
    width: 1.75rem;
    height: 1.75rem;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Space Mono', monospace;
    font-size: 0.7rem;
    color: var(--accent);
    font-weight: 700;
  }

  /* TAG */
  .tag {
    display: inline-block;
    font-family: 'Space Mono', monospace;
    font-size: 0.68rem;
    padding: 0.2em 0.6em;
    border-radius: 4px;
    margin-right: 0.3rem;
    font-weight: 700;
    letter-spacing: 0.05em;
  }
  .tag-green { background: rgba(127,255,110,0.12); color: var(--accent); }
  .tag-blue { background: rgba(110,180,255,0.12); color: var(--accent2); }
  .tag-orange { background: rgba(255,159,110,0.12); color: var(--accent3); }
  .tag-purple { background: rgba(212,110,255,0.12); color: var(--accent4); }

  @media (max-width: 600px) {
    section { padding: 3rem 1.25rem; }
    .hero { padding: 4rem 1.25rem; }
    h2 { font-size: 1.5rem; }
  }
</style>
</head>
<body>

<nav>
  <span class="logo">üêç imports</span>
  <a href="#mental-model">Mental Model</a>
  <a href="#syntax">Syntax</a>
  <a href="#system-path">sys.path</a>
  <a href="#packages">Packages</a>
  <a href="#relative">Relative</a>
  <a href="#how-it-works">Under the Hood</a>
  <a href="#patterns">Patterns</a>
  <a href="#pitfalls">Pitfalls</a>
  <a href="#quiz">Quiz</a>
</nav>

<main>

<!-- HERO -->
<section class="hero" id="top">
  <div class="sec-label">The Complete Guide</div>
  <h1>Python <span>Imports</span><br>Demystified</h1>
  <p>Every angle. Every edge case. Every mental model you need so imports never confuse you again.</p>
  <div class="pill-row">
    <span class="pill">import basics</span>
    <span class="pill">sys.path</span>
    <span class="pill">packages</span>
    <span class="pill">relative imports</span>
    <span class="pill">__init__.py</span>
    <span class="pill">circular imports</span>
    <span class="pill">__all__</span>
  </div>
</section>

<!-- 1. MENTAL MODEL -->
<section id="mental-model" class="fade-in">
  <div class="sec-label">Chapter 1</div>
  <h2>The Mental Model</h2>
  <p>Before memorizing syntax, you need <strong>one core idea</strong>: a Python import is just Python <em>running a file</em> and giving you access to the names it defined.</p>

  <div class="callout">
    <div class="callout-title">üß† The Golden Rule</div>
    <code>import foo</code> ‚Üí Python finds <code>foo.py</code>, <strong>executes it top-to-bottom</strong>, and stores all resulting names in a module object you can access as <code>foo</code>.
  </div>

  <p>That's it. Everything else is just details about <em>where</em> Python looks and <em>how</em> you reference the names.</p>

  <div class="diagram"><span class="hi">When you write: import math</span>

Python does this:
  1. Check <span class="hi2">sys.modules</span> ‚Äî already imported? Return cached copy.
  2. Find <span class="hi3">math.py</span> (or math/) by searching sys.path
  3. <span class="hi">Execute</span> the file top to bottom
  4. Store the resulting module object in <span class="hi2">sys.modules['math']</span>
  5. Bind the name <span class="hi">'math'</span> in your current namespace</div>

  <h3>Modules vs Packages vs Scripts</h3>
  <div class="card-grid">
    <div class="card">
      <div class="card-icon">üìÑ</div>
      <h4>Module</h4>
      <p>Any single <code>.py</code> file. <code>import utils</code> imports <code>utils.py</code>. The module name IS the filename (minus <code>.py</code>).</p>
    </div>
    <div class="card">
      <div class="card-icon">üìÅ</div>
      <h4>Package</h4>
      <p>A <strong>folder</strong> containing an <code>__init__.py</code> file. Makes a directory importable as a namespace.</p>
    </div>
    <div class="card">
      <div class="card-icon">‚ñ∂Ô∏è</div>
      <h4>Script</h4>
      <p>A <code>.py</code> file run directly (<code>python script.py</code>). Its <code>__name__</code> is <code>"__main__"</code>, not its filename.</p>
    </div>
    <div class="card">
      <div class="card-icon">üì¶</div>
      <h4>Built-in / Stdlib</h4>
      <p>Modules that ship with Python. <code>math</code>, <code>os</code>, <code>sys</code>, <code>json</code> etc. Always available, no install needed.</p>
    </div>
  </div>
</section>

<!-- 2. SYNTAX -->
<section id="syntax" class="fade-in">
  <div class="sec-label">Chapter 2</div>
  <h2>All the Import Syntax</h2>
  <p>There are only 4 import forms. Know all of them cold.</p>

  <h3>Form 1 ‚Äî <code>import module</code></h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> basic_import.py</div>
    <div class="code-body"><pre><span class="kw">import</span> <span class="mod">math</span>
<span class="kw">import</span> <span class="mod">os</span>
<span class="kw">import</span> <span class="mod">json</span>

<span class="cmt"># Access via dot notation ‚Äî explicit, always clear where it came from</span>
result = <span class="mod">math</span>.<span class="fn">sqrt</span>(<span class="num">16</span>)       <span class="cmt"># 4.0</span>
path   = <span class="mod">os</span>.<span class="fn">getcwd</span>()
data   = <span class="mod">json</span>.<span class="fn">loads</span>(<span class="str">'{"a": 1}'</span>)

<span class="cmt"># You can import multiple on one line (PEP8 discourages this)</span>
<span class="kw">import</span> <span class="mod">os</span>, <span class="mod">sys</span>, <span class="mod">json</span>  <span class="cmt"># legal, but prefer separate lines</span></pre></div>
  </div>

  <h3>Form 2 ‚Äî <code>from module import name</code></h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> from_import.py</div>
    <div class="code-body"><pre><span class="kw">from</span> <span class="mod">math</span> <span class="kw">import</span> <span class="fn">sqrt</span>, <span class="fn">pi</span>, <span class="fn">ceil</span>
<span class="kw">from</span> <span class="mod">os.path</span> <span class="kw">import</span> <span class="fn">join</span>, <span class="fn">exists</span>
<span class="kw">from</span> <span class="mod">typing</span> <span class="kw">import</span> <span class="fn">List</span>, <span class="fn">Dict</span>, <span class="fn">Optional</span>

<span class="cmt"># Now use the names DIRECTLY ‚Äî no module prefix</span>
result = <span class="fn">sqrt</span>(<span class="num">25</span>)            <span class="cmt"># 5.0</span>
path   = <span class="fn">join</span>(<span class="str">"/home"</span>, <span class="str">"user"</span>)  <span class="cmt"># "/home/user"</span>

<span class="cmt"># ‚ö†Ô∏è These names are now in YOUR namespace ‚Äî can clash!</span>
<span class="cmt"># If you define sqrt = 5 later, you lose math.sqrt</span>
sqrt = <span class="num">5</span>   <span class="cmt"># Oops, shadowed the function</span></pre></div>
  </div>

  <h3>Form 3 ‚Äî <code>import module as alias</code></h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> aliases.py</div>
    <div class="code-body"><pre><span class="cmt"># Industry-standard aliases ‚Äî everyone uses these</span>
<span class="kw">import</span> <span class="mod">numpy</span> <span class="kw">as</span> <span class="mod">np</span>
<span class="kw">import</span> <span class="mod">pandas</span> <span class="kw">as</span> <span class="mod">pd</span>
<span class="kw">import</span> <span class="mod">matplotlib.pyplot</span> <span class="kw">as</span> <span class="mod">plt</span>
<span class="kw">import</span> <span class="mod">tensorflow</span> <span class="kw">as</span> <span class="mod">tf</span>

<span class="cmt"># Custom alias for long module names</span>
<span class="kw">import</span> <span class="mod">very_long_module_name</span> <span class="kw">as</span> <span class="mod">vlm</span>

<span class="cmt"># from ... import ... as ...</span>
<span class="kw">from</span> <span class="mod">datetime</span> <span class="kw">import</span> <span class="fn">datetime</span> <span class="kw">as</span> <span class="fn">dt</span>
<span class="kw">from</span> <span class="mod">collections</span> <span class="kw">import</span> <span class="fn">OrderedDict</span> <span class="kw">as</span> <span class="fn">OD</span>

now = <span class="fn">dt</span>.<span class="fn">now</span>()
arr = <span class="mod">np</span>.<span class="fn">array</span>([<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>])</pre></div>
  </div>

  <h3>Form 4 ‚Äî <code>from module import *</code> (Star import)</h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> star_import.py</div>
    <div class="code-body"><pre><span class="kw">from</span> <span class="mod">math</span> <span class="kw">import</span> *   <span class="cmt"># Imports ALL public names from math</span>

<span class="cmt"># Now you have: sqrt, pi, ceil, floor, sin, cos, ... all of them</span>
result = <span class="fn">sqrt</span>(<span class="num">9</span>)
area = pi * <span class="num">5</span>**<span class="num">2</span>

<span class="cmt"># What gets imported? Everything NOT starting with underscore _</span>
<span class="cmt"># UNLESS __all__ is defined ‚Äî then ONLY what's in __all__</span></pre></div>
  </div>

  <div class="callout warn">
    <div class="callout-title">‚ö†Ô∏è Avoid Star Imports in Production</div>
    <code>from module import *</code> pollutes your namespace with names you didn't ask for. If two modules both define <code>open</code>, the last import wins silently. Only acceptable in interactive sessions or when a library explicitly designs for it (like <code>tkinter</code>).
  </div>

  <h3>Quick Comparison</h3>
  <table>
    <tr><th>Syntax</th><th>What you get</th><th>Use when</th></tr>
    <tr><td><code>import math</code></td><td>Module object bound to <code>math</code></td><td>Standard; keeps namespace clean</td></tr>
    <tr><td><code>from math import sqrt</code></td><td>Just <code>sqrt</code> in your namespace</td><td>Using 1-3 specific names frequently</td></tr>
    <tr><td><code>import numpy as np</code></td><td>Module bound to <code>np</code></td><td>Long names; community conventions</td></tr>
    <tr><td><code>from math import *</code></td><td>All public names in your namespace</td><td>Rarely; avoid in production</td></tr>
  </table>
</section>

<!-- 3. SYS.PATH -->
<section id="system-path" class="fade-in">
  <div class="sec-label">Chapter 3</div>
  <h2>Where Python Looks ‚Äî <code>sys.path</code></h2>
  <p>When you write <code>import foo</code>, Python searches locations in order. Understanding this eliminates 90% of <code>ModuleNotFoundError</code> mysteries.</p>

  <div class="diagram"><span class="hi">sys.path</span> ‚Äî the ordered search list:

<span class="hi2">1.</span> <span class="hi">sys.modules</span> (cache) ‚Äî already imported? Done. Return it.
<span class="hi2">2.</span> Built-in modules (C-level: sys, builtins, marshal...)
<span class="hi2">3.</span> Frozen modules (compiled into the interpreter)
<span class="hi2">4.</span> <span class="hi3">The directory of the script being run</span>  ‚Üê Often #1 in practice
<span class="hi2">5.</span> PYTHONPATH environment variable entries
<span class="hi2">6.</span> Standard library directories (e.g. /usr/lib/python3.11/)
<span class="hi2">7.</span> Site-packages (installed third-party: numpy, pandas...)</div>

  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> explore_syspath.py</div>
    <div class="code-body"><pre><span class="kw">import</span> <span class="mod">sys</span>

<span class="cmt"># See exactly where Python looks on your machine</span>
<span class="kw">for</span> path <span class="kw">in</span> sys.path:
    <span class="fn">print</span>(path)

<span class="cmt"># Output might look like:</span>
<span class="cmt"># ''  (empty string = current directory)</span>
<span class="cmt"># /home/user/.pyenv/versions/3.11.0/lib/python311.zip</span>
<span class="cmt"># /home/user/.pyenv/versions/3.11.0/lib/python3.11</span>
<span class="cmt"># /home/user/.pyenv/versions/3.11.0/lib/python3.11/lib-dynload</span>
<span class="cmt"># /home/user/.pyenv/versions/3.11.0/lib/python3.11/site-packages</span>

<span class="cmt"># Add your own path at runtime (use sparingly)</span>
sys.path.insert(<span class="num">0</span>, <span class="str">"/path/to/my/modules"</span>)
<span class="kw">import</span> <span class="mod">my_module</span>  <span class="cmt"># now finds /path/to/my/modules/my_module.py</span></pre></div>
  </div>

  <h3>The Empty String <code>''</code> in sys.path</h3>
  <p>The first entry is often <code>''</code> (empty string), meaning <strong>the current working directory</strong>. This is why you can do <code>import my_file</code> when <code>my_file.py</code> is in the same folder ‚Äî but it changes based on how you run Python.</p>

  <div class="callout info">
    <div class="callout-title">üí° Pro Tip ‚Äî Inspect what Python finds</div>
    Use <code>import importlib; importlib.util.find_spec("requests")</code> to see exactly which file would be loaded for any module name, without actually importing it.
  </div>

  <h3>The Module Cache: <code>sys.modules</code></h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> module_cache.py</div>
    <div class="code-body"><pre><span class="kw">import</span> <span class="mod">sys</span>
<span class="kw">import</span> <span class="mod">math</span>

<span class="cmt"># math is now cached ‚Äî second import is FREE (same object)</span>
<span class="kw">import</span> <span class="mod">math</span>  <span class="cmt"># instantly returns sys.modules['math']</span>

<span class="cmt"># All imports share the SAME module object</span>
<span class="kw">import</span> <span class="mod">math</span> <span class="kw">as</span> <span class="mod">m1</span>
<span class="kw">import</span> <span class="mod">math</span> <span class="kw">as</span> <span class="mod">m2</span>
<span class="fn">print</span>(m1 <span class="kw">is</span> m2)   <span class="cmt"># True! Same object in memory</span>

<span class="cmt"># See the cache</span>
<span class="fn">print</span>(<span class="str">'math'</span> <span class="kw">in</span> sys.modules)   <span class="cmt"># True</span>
<span class="fn">print</span>(sys.modules[<span class="str">'math'</span>])      <span class="cmt"># &lt;module 'math' from '...'&gt;</span>

<span class="cmt"># Force re-import (rarely needed, usually a design smell)</span>
<span class="kw">import</span> <span class="mod">importlib</span>
importlib.<span class="fn">reload</span>(<span class="mod">math</span>)</pre></div>
  </div>
</section>

<!-- 4. PACKAGES -->
<section id="packages" class="fade-in">
  <div class="sec-label">Chapter 4</div>
  <h2>Packages ‚Äî Folders as Modules</h2>
  <p>A <strong>package</strong> is a directory that Python treats as a module namespace. It must contain <code>__init__.py</code> (can be empty).</p>

  <div class="diagram"><span class="hi">Project structure:</span>

my_project/
‚îú‚îÄ‚îÄ <span class="hi">main.py</span>
‚îî‚îÄ‚îÄ <span class="hi2">mypackage</span>/
    ‚îú‚îÄ‚îÄ <span class="hi3">__init__.py</span>       ‚Üê Makes this a package
    ‚îú‚îÄ‚îÄ <span class="hi">utils.py</span>
    ‚îú‚îÄ‚îÄ <span class="hi">models.py</span>
    ‚îî‚îÄ‚îÄ <span class="hi4">subpackage</span>/
        ‚îú‚îÄ‚îÄ <span class="hi3">__init__.py</span>
        ‚îî‚îÄ‚îÄ <span class="hi">helpers.py</span></div>

  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> main.py</div>
    <div class="code-body"><pre><span class="cmt"># Import the package itself (runs __init__.py)</span>
<span class="kw">import</span> <span class="mod">mypackage</span>

<span class="cmt"># Import a module inside the package</span>
<span class="kw">import</span> <span class="mod">mypackage.utils</span>
mypackage.utils.<span class="fn">do_something</span>()

<span class="cmt"># From-import a specific name from a submodule</span>
<span class="kw">from</span> <span class="mod">mypackage.utils</span> <span class="kw">import</span> <span class="fn">helper_function</span>
<span class="fn">helper_function</span>()

<span class="cmt"># Import from nested subpackage</span>
<span class="kw">from</span> <span class="mod">mypackage.subpackage.helpers</span> <span class="kw">import</span> <span class="fn">deep_function</span>

<span class="cmt"># Alias a submodule</span>
<span class="kw">import</span> <span class="mod">mypackage.utils</span> <span class="kw">as</span> <span class="mod">utils</span>
utils.<span class="fn">do_something</span>()</pre></div>
  </div>

  <h3>The Power of <code>__init__.py</code></h3>
  <p><code>__init__.py</code> runs when the package is imported. Use it to control what the package exposes and to simplify deep import paths.</p>

  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> mypackage/__init__.py</div>
    <div class="code-body"><pre><span class="cmt"># Empty __init__.py = just makes it a package, nothing auto-imported</span>

<span class="cmt"># OR: Re-export things to create a clean public API</span>
<span class="kw">from</span> <span class="mod">.utils</span> <span class="kw">import</span> <span class="fn">helper_function</span>, <span class="fn">another_util</span>
<span class="kw">from</span> <span class="mod">.models</span> <span class="kw">import</span> <span class="fn">User</span>, <span class="fn">Product</span>

<span class="cmt"># Now users can do: from mypackage import User</span>
<span class="cmt"># Instead of:      from mypackage.models import User</span>

<span class="cmt"># Control what 'from mypackage import *' imports</span>
__all__ = [<span class="str">"helper_function"</span>, <span class="str">"User"</span>, <span class="str">"Product"</span>]

<span class="cmt"># Package version (common pattern)</span>
__version__ = <span class="str">"1.2.0"</span></pre></div>
  </div>

  <h3>Namespace Packages (Python 3.3+)</h3>
  <div class="callout info">
    <div class="callout-title">‚ÑπÔ∏è No __init__.py Needed (Sometimes)</div>
    Python 3.3+ supports <strong>namespace packages</strong> ‚Äî directories WITHOUT <code>__init__.py</code> can still be imported. This enables splitting one package across multiple directories. For regular projects, still use <code>__init__.py</code> ‚Äî it's explicit and controlled.
  </div>

  <h3><code>__all__</code> ‚Äî Controlling Your Public API</h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> mymodule.py</div>
    <div class="code-body"><pre><span class="cmt"># __all__ controls what 'from mymodule import *' exports</span>
<span class="cmt"># It also signals to humans: "these are the public names"</span>
__all__ = [<span class="str">"PublicClass"</span>, <span class="str">"public_function"</span>]

<span class="kw">class</span> <span class="fn">PublicClass</span>:   <span class="cmt"># exported</span>
    <span class="kw">pass</span>

<span class="kw">def</span> <span class="fn">public_function</span>():   <span class="cmt"># exported</span>
    <span class="kw">pass</span>

<span class="kw">def</span> <span class="fn">_private_helper</span>():   <span class="cmt"># NOT exported (underscore convention)</span>
    <span class="kw">pass</span>

<span class="kw">def</span> <span class="fn">internal_detail</span>():   <span class="cmt"># NOT exported (not in __all__)</span>
    <span class="kw">pass</span></pre></div>
  </div>
</section>

<!-- 5. RELATIVE IMPORTS -->
<section id="relative" class="fade-in">
  <div class="sec-label">Chapter 5</div>
  <h2>Relative Imports</h2>
  <p>Inside a package, modules can import each other using <strong>relative paths</strong> with dot notation. This keeps the package self-contained and relocatable.</p>

  <div class="diagram"><span class="hi">Package structure:</span>

mypackage/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ <span class="hi">models.py</span>        ‚Üê wants to use utils
‚îú‚îÄ‚îÄ <span class="hi2">utils.py</span>         ‚Üê defines helper()
‚îî‚îÄ‚îÄ subpackage/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îî‚îÄ‚îÄ <span class="hi3">deep.py</span>         ‚Üê wants to use models</div>

  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> mypackage/models.py</div>
    <div class="code-body"><pre><span class="cmt"># ABSOLUTE import (works if mypackage is on sys.path)</span>
<span class="kw">from</span> <span class="mod">mypackage.utils</span> <span class="kw">import</span> <span class="fn">helper</span>

<span class="cmt"># RELATIVE import (. = this package, .. = parent package)</span>
<span class="kw">from</span> <span class="mod">.</span> <span class="kw">import</span> <span class="mod">utils</span>           <span class="cmt"># import sibling module</span>
<span class="kw">from</span> <span class="mod">.utils</span> <span class="kw">import</span> <span class="fn">helper</span>    <span class="cmt"># specific name from sibling</span>
<span class="kw">from</span> <span class="mod">.utils</span> <span class="kw">import</span> <span class="fn">helper</span> <span class="kw">as</span> <span class="fn">h</span>  <span class="cmt"># with alias</span></pre></div>
  </div>

  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> mypackage/subpackage/deep.py</div>
    <div class="code-body"><pre><span class="cmt"># One dot = same package (subpackage/)</span>
<span class="kw">from</span> <span class="mod">.</span> <span class="kw">import</span> <span class="mod">sibling_in_subpackage</span>

<span class="cmt"># Two dots = go UP one level (mypackage/)</span>
<span class="kw">from</span> <span class="mod">..</span> <span class="kw">import</span> <span class="mod">models</span>             <span class="cmt"># mypackage/models.py</span>
<span class="kw">from</span> <span class="mod">..utils</span> <span class="kw">import</span> <span class="fn">helper</span>        <span class="cmt"># mypackage/utils.py</span>

<span class="cmt"># Three dots = go UP two levels</span>
<span class="kw">from</span> <span class="mod">...</span> <span class="kw">import</span> <span class="mod">something</span>         <span class="cmt"># grandparent package</span></pre></div>
  </div>

  <div class="callout warn">
    <div class="callout-title">‚ö†Ô∏è Relative Imports Only Work Inside Packages</div>
    You CANNOT use relative imports in a script run directly (<code>python models.py</code>). Python raises <code>ImportError: attempted relative import with no known parent package</code>. Relative imports require the file to be <em>part of a package</em> that was imported properly.
  </div>

  <h3>Absolute vs Relative: When to Use Which</h3>
  <table>
    <tr><th></th><th>Absolute</th><th>Relative</th></tr>
    <tr><td><strong>Looks like</strong></td><td><code>from mypackage.utils import x</code></td><td><code>from .utils import x</code></td></tr>
    <tr><td><strong>Works in</strong></td><td>Any context</td><td>Only inside packages</td></tr>
    <tr><td><strong>Renaming package</strong></td><td>Must update all imports</td><td>Still works automatically</td></tr>
    <tr><td><strong>Clarity</strong></td><td>Always clear where it's from</td><td>Shorter; less obvious for readers</td></tr>
    <tr><td><strong>PEP 8 says</strong></td><td>‚úÖ Preferred for most cases</td><td>OK for intra-package imports</td></tr>
  </table>
</section>

<!-- 6. HOW IT WORKS UNDER THE HOOD -->
<section id="how-it-works" class="fade-in">
  <div class="sec-label">Chapter 6</div>
  <h2>Under the Hood</h2>
  <p>Understanding Python's import machinery removes the last bits of magic.</p>

  <h3>The Import Steps in Detail</h3>
  <ol class="steps">
    <li><strong>Python evaluates the import statement.</strong> It extracts the module name string (e.g., <code>"math"</code>).</li>
    <li><strong>Check <code>sys.modules</code> cache.</strong> If <code>"math"</code> is already a key, return that object immediately. No file I/O happens.</li>
    <li><strong>Find the module using finders.</strong> Python iterates through <code>sys.meta_path</code> ‚Äî a list of "finders" (built-in finder, frozen finder, path-based finder). Each gets a chance to locate the module.</li>
    <li><strong>The path-based finder searches <code>sys.path</code>.</strong> For each directory, it looks for <code>math.py</code>, <code>math/__init__.py</code>, or a compiled <code>math.cpython-311.pyc</code>.</li>
    <li><strong>Create a module spec.</strong> The finder returns a <code>ModuleSpec</code> object describing where and how to load the module.</li>
    <li><strong>A loader executes the file.</strong> Python creates a new module object, adds it to <code>sys.modules</code>, then executes the file's bytecode in the module's namespace.</li>
    <li><strong>Bind the name.</strong> The name you wrote (<code>math</code>, or <code>m</code> if you aliased it) gets bound in your local namespace to the module object.</li>
  </ol>

  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> what_import_does.py</div>
    <div class="code-body"><pre><span class="cmt"># These two are roughly equivalent:</span>

<span class="cmt"># High-level:</span>
<span class="kw">import</span> <span class="mod">math</span>

<span class="cmt"># Low-level equivalent (what Python does internally):</span>
<span class="kw">import</span> <span class="mod">importlib</span>
<span class="kw">import</span> <span class="mod">sys</span>

<span class="kw">if</span> <span class="str">'math'</span> <span class="kw">not in</span> sys.modules:
    spec = importlib.util.<span class="fn">find_spec</span>(<span class="str">'math'</span>)
    module = importlib.util.<span class="fn">module_from_spec</span>(spec)
    sys.modules[<span class="str">'math'</span>] = module
    spec.loader.<span class="fn">exec_module</span>(module)

math = sys.modules[<span class="str">'math'</span>]  <span class="cmt"># bind to local name</span></pre></div>
  </div>

  <h3>Where Compiled Files Go: <code>__pycache__</code></h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> bytecode_caching.py</div>
    <div class="code-body"><pre><span class="cmt"># Python compiles .py ‚Üí bytecode (.pyc) and caches it in __pycache__/</span>

<span class="cmt"># Structure after importing mymodule.py:</span>
<span class="cmt"># mymodule.py</span>
<span class="cmt"># __pycache__/</span>
<span class="cmt">#   mymodule.cpython-311.pyc   ‚Üê cached bytecode for Python 3.11</span>

<span class="cmt"># On next import, if .py hasn't changed: loads .pyc directly (faster)</span>
<span class="cmt"># If .py changed: recompiles and updates .pyc</span>

<span class="cmt"># You can skip .pyc creation:</span>
<span class="cmt"># python -B myscript.py</span>
<span class="cmt"># or set: PYTHONDONTWRITEBYTECODE=1</span>

<span class="cmt"># Check if a module is pure Python or compiled C:</span>
<span class="kw">import</span> <span class="mod">math</span>
<span class="fn">print</span>(<span class="mod">math</span>.__file__)   <span class="cmt"># None for built-in C modules</span>

<span class="kw">import</span> <span class="mod">json</span>
<span class="fn">print</span>(<span class="mod">json</span>.__file__)   <span class="cmt"># /usr/lib/python3.11/json/__init__.py</span></pre></div>
  </div>

  <h3><code>__name__</code> and <code>__main__</code></h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> name_trick.py</div>
    <div class="code-body"><pre><span class="cmt"># Every module has __name__</span>
<span class="cmt"># When run directly: __name__ == "__main__"</span>
<span class="cmt"># When imported:     __name__ == the module's filename (without .py)</span>

<span class="kw">def</span> <span class="fn">main</span>():
    <span class="fn">print</span>(<span class="str">"Running main logic"</span>)

<span class="kw">if</span> __name__ == <span class="str">"__main__"</span>:
    <span class="fn">main</span>()
<span class="cmt"># ‚úÖ This block only runs when you execute: python name_trick.py</span>
<span class="cmt"># ‚úÖ NOT when someone does: import name_trick</span>
<span class="cmt"># This is the standard way to make a file both importable AND runnable</span></pre></div>
  </div>
</section>

<!-- 7. PATTERNS -->
<section id="patterns" class="fade-in">
  <div class="sec-label">Chapter 7</div>
  <h2>Real-World Patterns</h2>

  <h3>Lazy / Conditional Imports</h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> patterns.py</div>
    <div class="code-body"><pre><span class="cmt"># Import inside a function ‚Äî only loaded when needed</span>
<span class="kw">def</span> <span class="fn">process_image</span>(path):
    <span class="kw">import</span> <span class="mod">PIL.Image</span>   <span class="cmt"># Only imports if this function is called</span>
    img = PIL.Image.<span class="fn">open</span>(path)
    <span class="kw">return</span> img

<span class="cmt"># Conditional import ‚Äî optional dependency</span>
<span class="kw">try</span>:
    <span class="kw">import</span> <span class="mod">ujson</span> <span class="kw">as</span> <span class="mod">json</span>   <span class="cmt"># faster json if available</span>
<span class="kw">except</span> <span class="fn">ImportError</span>:
    <span class="kw">import</span> <span class="mod">json</span>             <span class="cmt"># fall back to stdlib</span>

<span class="cmt"># Type-checking-only imports (avoid circular imports at runtime)</span>
<span class="kw">from</span> <span class="mod">__future__</span> <span class="kw">import</span> <span class="fn">annotations</span>  <span class="cmt"># makes all annotations strings</span>
<span class="kw">from</span> <span class="mod">typing</span> <span class="kw">import</span> <span class="fn">TYPE_CHECKING</span>

<span class="kw">if</span> <span class="fn">TYPE_CHECKING</span>:
    <span class="kw">from</span> <span class="mod">mypackage.models</span> <span class="kw">import</span> <span class="fn">User</span>  <span class="cmt"># only for type checker, not at runtime</span>

<span class="kw">def</span> <span class="fn">greet</span>(user: <span class="str">"User"</span>) -> <span class="str">str</span>:   <span class="cmt"># string annotation avoids runtime import</span>
    <span class="kw">return</span> <span class="str">f"Hello {user.name}"</span></pre></div>
  </div>

  <h3>Solving Circular Imports</h3>
  <div class="callout warn">
    <div class="callout-title">‚ö†Ô∏è Circular Import Problem</div>
    <code>a.py</code> imports from <code>b.py</code>, and <code>b.py</code> imports from <code>a.py</code>. Python can handle simple cases, but complex circular deps cause <code>ImportError: cannot import name 'X' from partially initialized module</code>.
  </div>

  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> circular_fix.py</div>
    <div class="code-body"><pre><span class="cmt"># ‚ùå Problem: a.py and b.py import each other at module level</span>
<span class="cmt"># a.py: from b import B_Class</span>
<span class="cmt"># b.py: from a import A_Class   ‚Üê fails: a is partially initialized</span>

<span class="cmt"># ‚úÖ Fix 1: Move import inside the function that needs it</span>
<span class="cmt"># a.py:</span>
<span class="kw">class</span> <span class="fn">A_Class</span>:
    <span class="kw">def</span> <span class="fn">get_b</span>(self):
        <span class="kw">from</span> <span class="mod">b</span> <span class="kw">import</span> <span class="fn">B_Class</span>   <span class="cmt"># import at call time, not module load time</span>
        <span class="kw">return</span> <span class="fn">B_Class</span>()

<span class="cmt"># ‚úÖ Fix 2: Use TYPE_CHECKING guard (for type hints only)</span>
<span class="kw">from</span> <span class="mod">typing</span> <span class="kw">import</span> <span class="fn">TYPE_CHECKING</span>
<span class="kw">if</span> <span class="fn">TYPE_CHECKING</span>:
    <span class="kw">from</span> <span class="mod">b</span> <span class="kw">import</span> <span class="fn">B_Class</span>

<span class="cmt"># ‚úÖ Fix 3: Restructure ‚Äî extract shared code to a third module c.py</span>
<span class="cmt"># Both a.py and b.py import from c.py, they don't import each other</span></pre></div>
  </div>

  <h3>Import Order Convention (PEP 8)</h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> import_order.py  (PEP 8 compliant)</div>
    <div class="code-body"><pre><span class="cmt"># Group 1: Standard library</span>
<span class="kw">import</span> <span class="mod">os</span>
<span class="kw">import</span> <span class="mod">sys</span>
<span class="kw">from</span> <span class="mod">datetime</span> <span class="kw">import</span> <span class="fn">datetime</span>
<span class="kw">from</span> <span class="mod">typing</span> <span class="kw">import</span> <span class="fn">List</span>, <span class="fn">Optional</span>

<span class="cmt"># Group 2: Third-party packages (installed via pip)</span>
<span class="kw">import</span> <span class="mod">numpy</span> <span class="kw">as</span> <span class="mod">np</span>
<span class="kw">import</span> <span class="mod">pandas</span> <span class="kw">as</span> <span class="mod">pd</span>
<span class="kw">from</span> <span class="mod">flask</span> <span class="kw">import</span> <span class="fn">Flask</span>, <span class="fn">request</span>

<span class="cmt"># Group 3: Local / project imports</span>
<span class="kw">from</span> <span class="mod">mypackage</span> <span class="kw">import</span> <span class="fn">utils</span>
<span class="kw">from</span> <span class="mod">mypackage.models</span> <span class="kw">import</span> <span class="fn">User</span>
<span class="kw">from</span> <span class="mod">.helpers</span> <span class="kw">import</span> <span class="fn">format_data</span>

<span class="cmt"># üí° Use isort or ruff to auto-sort imports</span>
<span class="cmt"># pip install isort &amp;&amp; isort myfile.py</span></pre></div>
  </div>

  <h3>Dynamic Imports with <code>importlib</code></h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> dynamic_import.py</div>
    <div class="code-body"><pre><span class="kw">import</span> <span class="mod">importlib</span>

<span class="cmt"># Import a module by string name at runtime</span>
module_name = <span class="str">"math"</span>
math = importlib.<span class="fn">import_module</span>(module_name)
<span class="fn">print</span>(math.<span class="fn">sqrt</span>(<span class="num">9</span>))   <span class="cmt"># 3.0</span>

<span class="cmt"># Load plugin system example</span>
plugins = [<span class="str">"plugin_a"</span>, <span class="str">"plugin_b"</span>, <span class="str">"plugin_c"</span>]
<span class="kw">for</span> name <span class="kw">in</span> plugins:
    mod = importlib.<span class="fn">import_module</span>(<span class="str">f"myapp.plugins.{name}"</span>)
    mod.<span class="fn">register</span>()   <span class="cmt"># call a standard interface on each plugin</span>

<span class="cmt"># Check if a module is available without importing it</span>
spec = importlib.util.<span class="fn">find_spec</span>(<span class="str">"numpy"</span>)
<span class="kw">if</span> spec <span class="kw">is not</span> <span class="kw">None</span>:
    <span class="fn">print</span>(<span class="str">"numpy is installed"</span>)
<span class="kw">else</span>:
    <span class="fn">print</span>(<span class="str">"numpy not found"</span>)</pre></div>
  </div>
</section>

<!-- 8. PITFALLS -->
<section id="pitfalls" class="fade-in">
  <div class="sec-label">Chapter 8</div>
  <h2>Pitfalls & How to Fix Them</h2>

  <h3>1. Shadowing a Module with Your Own Filename</h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> ‚ùå naming conflict</div>
    <div class="code-body"><pre><span class="cmt"># If you name your file math.py or json.py or os.py,</span>
<span class="cmt"># you shadow the stdlib module!</span>
<span class="cmt"># Your script directory is first in sys.path</span>
<span class="cmt"># so Python finds YOUR file instead of the real module.</span>

<span class="cmt"># Inside your "json.py":</span>
<span class="kw">import</span> <span class="mod">json</span>   <span class="cmt"># This tries to import itself ‚Üí RecursionError or ImportError</span>

<span class="cmt"># ‚úÖ Fix: Never name your files the same as stdlib/third-party modules</span>
<span class="cmt"># Check: python -c "import json; print(json.__file__)"</span>
<span class="cmt"># If it prints your file, you have a name conflict</span></pre></div>
  </div>

  <h3>2. ModuleNotFoundError ‚Äî Diagnosis</h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> debug_imports.py</div>
    <div class="code-body"><pre><span class="kw">import</span> <span class="mod">sys</span>
<span class="fn">print</span>(sys.path)     <span class="cmt"># see all search paths</span>

<span class="kw">import</span> <span class="mod">importlib</span>
spec = importlib.util.<span class="fn">find_spec</span>(<span class="str">"mymodule"</span>)
<span class="fn">print</span>(spec)         <span class="cmt"># None if not found; shows path if found</span>

<span class="cmt"># Common causes:</span>
<span class="cmt"># 1. Wrong virtual env activated (module installed in different env)</span>
<span class="cmt"># 2. Forgot to pip install</span>
<span class="cmt"># 3. Running from wrong directory</span>
<span class="cmt"># 4. Module file doesn't exist where you think it does</span>
<span class="cmt"># 5. Typo in module name</span>

<span class="cmt"># Check which Python and pip you're actually using:</span>
<span class="cmt"># which python  ‚Üí  /home/user/.venv/bin/python</span>
<span class="cmt"># which pip     ‚Üí  /home/user/.venv/bin/pip</span></pre></div>
  </div>

  <h3>3. Mutable Module State</h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> shared_state.py</div>
    <div class="code-body"><pre><span class="cmt"># Module-level variables are shared across ALL imports of the module</span>
<span class="cmt"># (because sys.modules returns the same object)</span>

<span class="cmt"># config.py:</span>
settings = {<span class="str">"debug"</span>: <span class="kw">False</span>}

<span class="cmt"># file_a.py:</span>
<span class="kw">from</span> <span class="mod">config</span> <span class="kw">import</span> settings
settings[<span class="str">"debug"</span>] = <span class="kw">True</span>   <span class="cmt"># mutates the shared dict</span>

<span class="cmt"># file_b.py:</span>
<span class="kw">from</span> <span class="mod">config</span> <span class="kw">import</span> settings
<span class="fn">print</span>(settings[<span class="str">"debug"</span>])   <span class="cmt"># True! file_a's mutation is visible</span>

<span class="cmt"># ‚ö†Ô∏è This can be a feature (shared config) or a bug (unexpected mutation)</span>
<span class="cmt"># ‚úÖ Use it intentionally as a singleton; document it clearly</span></pre></div>
  </div>

  <h3>4. Star Import Name Collision</h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> star_collision.py</div>
    <div class="code-body"><pre><span class="kw">from</span> <span class="mod">os.path</span> <span class="kw">import</span> *
<span class="kw">from</span> <span class="mod">posixpath</span> <span class="kw">import</span> *   <span class="cmt"># Silently overrides some os.path names!</span>

<span class="cmt"># You now can't tell which 'join' you have</span>
<span class="cmt"># This is exactly why star imports are dangerous</span>

<span class="cmt"># ‚úÖ Always be explicit:</span>
<span class="kw">from</span> <span class="mod">os.path</span> <span class="kw">import</span> <span class="fn">join</span>, <span class="fn">exists</span>, <span class="fn">dirname</span></pre></div>
  </div>

  <h3>5. Running a Package File Directly</h3>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> run_package.sh / run_package.py</div>
    <div class="code-body"><pre><span class="cmt"># ‚ùå This breaks relative imports:</span>
<span class="cmt"># python mypackage/utils.py   ‚Üê no package context</span>

<span class="cmt"># ‚úÖ Run a package module correctly (from project root):</span>
<span class="cmt"># python -m mypackage.utils   ‚Üê -m flag sets up package context</span>

<span class="cmt"># ‚úÖ Run package's __main__.py:</span>
<span class="cmt"># python -m mypackage         ‚Üê runs mypackage/__main__.py</span>

<span class="cmt"># The -m flag:</span>
<span class="cmt"># 1. Adds current directory to sys.path</span>
<span class="cmt"># 2. Sets __package__ correctly for relative imports</span>
<span class="cmt"># 3. Sets __name__ to '__main__'</span></pre></div>
  </div>

  <h3>Quick Pitfall Reference</h3>
  <table>
    <tr><th>Error</th><th>Common Cause</th><th>Fix</th></tr>
    <tr><td><code>ModuleNotFoundError</code></td><td>Module not installed, wrong env, wrong dir</td><td>Check <code>sys.path</code>, activate venv, <code>pip install</code></td></tr>
    <tr><td><code>ImportError: cannot import name 'X'</code></td><td>Circular import, typo, name moved</td><td>Move import inside function; check module source</td></tr>
    <tr><td><code>AttributeError: module 'X' has no attribute 'Y'</code></td><td>Wrong module version, shadowed module, name changed</td><td>Check <code>X.__file__</code>, check version</td></tr>
    <tr><td><code>attempted relative import beyond top-level package</code></td><td>Too many dots (<code>...</code>) going above root</td><td>Use absolute imports; check package structure</td></tr>
    <tr><td>Stale code running after edits</td><td>Cached <code>.pyc</code> or <code>sys.modules</code></td><td>Delete <code>__pycache__</code>; use <code>importlib.reload()</code></td></tr>
  </table>
</section>

<!-- 9. QUIZ -->
<section id="quiz" class="fade-in">
  <div class="sec-label">Chapter 9</div>
  <h2>Test Yourself</h2>
  <p>Five questions covering the most important concepts. No pressure ‚Äî answers are instant.</p>

  <div class="quiz-box" id="q1">
    <div class="quiz-question">Q1. You write <code>import math</code> twice in the same file. How many times does Python execute <code>math.py</code>?</div>
    <div class="quiz-options">
      <button class="quiz-option" onclick="answer(this,'q1',false)">A) Twice ‚Äî once per import statement</button>
      <button class="quiz-option" onclick="answer(this,'q1',true)">B) Once ‚Äî the second import uses the sys.modules cache</button>
      <button class="quiz-option" onclick="answer(this,'q1',false)">C) Zero ‚Äî math is a built-in and never runs as a file</button>
    </div>
    <div class="quiz-feedback" id="q1-feedback"></div>
  </div>

  <div class="quiz-box" id="q2">
    <div class="quiz-question">Q2. You have <code>mypackage/utils.py</code> and inside it you write <code>from . import models</code>. What does the dot mean?</div>
    <div class="quiz-options">
      <button class="quiz-option" onclick="answer(this,'q2',false)">A) The current working directory (where you launched Python)</button>
      <button class="quiz-option" onclick="answer(this,'q2',true)">B) The current package (mypackage/)</button>
      <button class="quiz-option" onclick="answer(this,'q2',false)">C) The parent directory of the project</button>
    </div>
    <div class="quiz-feedback" id="q2-feedback"></div>
  </div>

  <div class="quiz-box" id="q3">
    <div class="quiz-question">Q3. You create a file called <code>json.py</code> in your project folder and then write <code>import json</code> in that same folder. What happens?</div>
    <div class="quiz-options">
      <button class="quiz-option" onclick="answer(this,'q3',false)">A) Python imports the standard library json module ‚Äî it always prefers stdlib</button>
      <button class="quiz-option" onclick="answer(this,'q3',true)">B) Python imports YOUR json.py ‚Äî the script directory is first in sys.path</button>
      <button class="quiz-option" onclick="answer(this,'q3',false)">C) Python raises an error because there's a naming conflict</button>
    </div>
    <div class="quiz-feedback" id="q3-feedback"></div>
  </div>

  <div class="quiz-box" id="q4">
    <div class="quiz-question">Q4. What does <code>__all__ = ["Foo", "bar"]</code> in a module control?</div>
    <div class="quiz-options">
      <button class="quiz-option" onclick="answer(this,'q4',false)">A) Which names can ever be accessed via dot notation (Foo and bar only)</button>
      <button class="quiz-option" onclick="answer(this,'q4',false)">B) Which names are available at runtime in the module</button>
      <button class="quiz-option" onclick="answer(this,'q4',true)">C) What gets exported when someone does <code>from module import *</code></button>
    </div>
    <div class="quiz-feedback" id="q4-feedback"></div>
  </div>

  <div class="quiz-box" id="q5">
    <div class="quiz-question">Q5. Your code in <code>mypackage/a.py</code> imports from <code>mypackage/b.py</code>, and <code>b.py</code> imports from <code>a.py</code> at the top level. This causes an ImportError. What's the cleanest fix?</div>
    <div class="quiz-options">
      <button class="quiz-option" onclick="answer(this,'q5',false)">A) Use <code>import *</code> ‚Äî it avoids circular import checks</button>
      <button class="quiz-option" onclick="answer(this,'q5',true)">B) Move the import inside the function that needs it, so it runs at call time not load time</button>
      <button class="quiz-option" onclick="answer(this,'q5',false)">C) Add <code>sys.path.insert(0, '.')</code> at the top of both files</button>
    </div>
    <div class="quiz-feedback" id="q5-feedback"></div>
  </div>
</section>

<!-- CHEATSHEET -->
<section class="fade-in">
  <div class="sec-label">Quick Reference</div>
  <h2>The Cheatsheet</h2>
  <div class="code-block">
    <div class="code-header"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span> python_imports_cheatsheet.py</div>
    <div class="code-body"><pre><span class="cmt"># ‚îÄ‚îÄ SYNTAX ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="kw">import</span> <span class="mod">module</span>                     <span class="cmt"># whole module, access via module.name</span>
<span class="kw">import</span> <span class="mod">module</span> <span class="kw">as</span> <span class="mod">alias</span>           <span class="cmt"># same, short name</span>
<span class="kw">from</span> <span class="mod">module</span> <span class="kw">import</span> <span class="fn">name</span>          <span class="cmt"># specific name into local namespace</span>
<span class="kw">from</span> <span class="mod">module</span> <span class="kw">import</span> <span class="fn">name</span> <span class="kw">as</span> <span class="fn">alias</span> <span class="cmt"># specific name, aliased</span>
<span class="kw">from</span> <span class="mod">module</span> <span class="kw">import</span> *              <span class="cmt"># all public names (avoid!)</span>

<span class="cmt"># ‚îÄ‚îÄ RELATIVE (inside packages only) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="kw">from</span> <span class="mod">.</span> <span class="kw">import</span> <span class="mod">sibling</span>            <span class="cmt"># sibling module in same package</span>
<span class="kw">from</span> <span class="mod">.sibling</span> <span class="kw">import</span> <span class="fn">name</span>        <span class="cmt"># name from sibling</span>
<span class="kw">from</span> <span class="mod">..</span> <span class="kw">import</span> <span class="mod">parent_module</span>     <span class="cmt"># go up one level</span>
<span class="kw">from</span> <span class="mod">..sibling</span> <span class="kw">import</span> <span class="fn">name</span>       <span class="cmt"># up one, then into sibling</span>

<span class="cmt"># ‚îÄ‚îÄ SEARCH ORDER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="cmt"># sys.modules cache ‚Üí built-ins ‚Üí sys.path</span>
<span class="cmt"># sys.path = [script_dir, PYTHONPATH, stdlib, site-packages]</span>

<span class="cmt"># ‚îÄ‚îÄ KEY ATTRIBUTES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
module.__name__     <span class="cmt"># module's name string</span>
module.__file__     <span class="cmt"># path to .py file (None for C built-ins)</span>
module.__package__  <span class="cmt"># package name (for relative import context)</span>
module.__all__      <span class="cmt"># controls 'from module import *'</span>

<span class="cmt"># ‚îÄ‚îÄ USEFUL TOOLS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="kw">import</span> <span class="mod">sys</span>; sys.modules          <span class="cmt"># cache of all loaded modules</span>
<span class="kw">import</span> <span class="mod">sys</span>; sys.path             <span class="cmt"># search paths</span>
importlib.<span class="fn">reload</span>(module)         <span class="cmt"># re-execute module (rarely needed)</span>
importlib.util.<span class="fn">find_spec</span>(<span class="str">"x"</span>)   <span class="cmt"># find where 'x' would load from</span>
importlib.<span class="fn">import_module</span>(<span class="str">"x"</span>)   <span class="cmt"># dynamic import by string name</span>

<span class="cmt"># ‚îÄ‚îÄ COMMON PITFALLS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="cmt"># 1. Don't name files after stdlib/3rd-party modules</span>
<span class="cmt"># 2. Relative imports fail when running a file directly (use -m)</span>
<span class="cmt"># 3. Circular imports ‚Üí move import inside function or use TYPE_CHECKING</span>
<span class="cmt"># 4. Star imports pollute namespace and hide where names come from</span>
<span class="cmt"># 5. Module-level state is shared (it's a singleton via sys.modules)</span>

<span class="cmt"># ‚îÄ‚îÄ IMPORT ORDER (PEP 8) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="cmt"># 1. stdlib   2. third-party   3. local</span>
<span class="cmt"># Blank line between each group; alphabetical within groups</span></pre></div>
  </div>
</section>

</main>

<footer>
  Python Imports ‚Äî Complete Guide &nbsp;|&nbsp; <span style="color: var(--accent)">from knowledge import confidence</span>
</footer>

<script>
  // NAV HIGHLIGHT
  const sections = document.querySelectorAll('section[id]');
  const navLinks = document.querySelectorAll('nav a[href^="#"]');
  const observer = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        navLinks.forEach(l => l.classList.remove('active'));
        const active = document.querySelector(`nav a[href="#${e.target.id}"]`);
        if (active) active.classList.add('active');
      }
    });
  }, { rootMargin: '-40% 0px -50% 0px' });
  sections.forEach(s => observer.observe(s));

  // FADE IN
  const fadeEls = document.querySelectorAll('.fade-in');
  const fadeObserver = new IntersectionObserver(entries => {
    entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
  }, { threshold: 0.08 });
  fadeEls.forEach(el => fadeObserver.observe(el));

  // QUIZ
  const feedbacks = {
    q1: "Correct! Python runs each module file exactly once, then caches it in sys.modules. Every subsequent import just retrieves the cached object ‚Äî zero file I/O.",
    q2: "Correct! A single dot (.) refers to the current package ‚Äî the directory containing the file doing the importing. Two dots (..) go up to the parent package.",
    q3: "Correct! The script's own directory is searched first in sys.path. Your json.py shadows the stdlib. This is a common and painful bug ‚Äî never name files after stdlib modules.",
    q4: "Correct! __all__ is specifically for controlling star imports. It doesn't restrict regular attribute access or named imports at all. It's also a useful signal to document your public API.",
    q5: "Correct! Moving the import inside the function defers it to call time, by which point both modules are fully loaded. Also valid: use TYPE_CHECKING guard for type-hint-only imports, or restructure to eliminate the cycle."
  };

  function answer(btn, qid, isCorrect) {
    const box = document.getElementById(qid);
    if (box.dataset.answered) return;
    box.dataset.answered = '1';
    const opts = box.querySelectorAll('.quiz-option');
    opts.forEach(o => o.style.pointerEvents = 'none');
    btn.classList.add(isCorrect ? 'correct' : 'wrong');
    if (!isCorrect) {
      opts.forEach(o => { if (o !== btn) { const txt = o.getAttribute('onclick'); if (txt.includes('true')) o.classList.add('correct'); } });
    }
    const fb = document.getElementById(qid + '-feedback');
    fb.textContent = feedbacks[qid];
    fb.className = 'quiz-feedback ' + (isCorrect ? 'ok' : 'no');
  }
</script>

</body>
</html>
